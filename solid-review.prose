# SOLID Design Code Review
# Parallel review checking each SOLID principle

agent srp_reviewer:
  model: haiku
  prompt: "You review code for Single Responsibility violations. Each class/function should have one reason to change."

agent ocp_reviewer:
  model: haiku
  prompt: "You review code for Open/Closed Principle. Code should be open for extension, closed for modification."

agent lsp_reviewer:
  model: haiku
  prompt: "You review code for Liskov Substitution violations. Subtypes must be substitutable for their base types."

agent isp_reviewer:
  model: haiku
  prompt: "You review code for Interface Segregation. Clients shouldn't depend on interfaces they don't use."

agent dip_reviewer:
  model: haiku
  prompt: "You review code for Dependency Inversion. Depend on abstractions, not concretions."

# Read the target code
let code = session "Read the main source files in this project (look in llm_do/ or src/). Focus on classes and their relationships."

# Review all 5 principles in parallel
parallel:
  srp = session: srp_reviewer
    prompt: "Review this code for Single Responsibility violations"
    context: code

  ocp = session: ocp_reviewer
    prompt: "Review for Open/Closed Principle adherence"
    context: code

  lsp = session: lsp_reviewer
    prompt: "Check for Liskov Substitution issues"
    context: code

  isp = session: isp_reviewer
    prompt: "Identify Interface Segregation problems"
    context: code

  dip = session: dip_reviewer
    prompt: "Evaluate Dependency Inversion patterns"
    context: code

# Synthesize findings
session "Combine all SOLID reviews into a prioritized report. Group by severity (critical, important, minor). Suggest specific refactoring actions."
  context: { srp, ocp, lsp, isp, dip }
